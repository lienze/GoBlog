<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>{{ .WebTitle }}</title>
		<script type="text/javascript" src="/static/showdown.min.js"></script>
		<link rel="stylesheet" type="text/css" href="/static/markdown.min.css" />
	</head>
	<style>
	.powered-text{
		font-size:14px;
	}
	.CommentDate{
		font-size:12px;
		/*background-color:#A8A8A8;*/
		color:#A8A8A8;
	}
	</style><body onload="initpage()">
		<span name="markdownContent">{{ .PageTitle }}</span>
		<span>{{ .PageDate }}&nbsp;|&nbsp;阅读量:{{ .PageReadNum }}&nbsp;|&nbsp;评论:{{ .PageCommentNum }}</span>
		<span name="markdownContent">{{ .PageContent }}</span>
		<hr>
		评论({{ .PageCommentNum }}):
		<ul>
			<hr>
			{{ range .PageComments }}
				[{{ .CommentUserName }}]{{ .CommentContent }}
				<br>
				<span class="CommentDate">{{ .CommentDateShow }}</span>
				<hr>
			{{ end }}
		</ul>
		<div name="commentform">
			Name:
			<input type="text" size="10" name="name" value="" id="FormName">
			Comment:
			<input type="text" size="78" name="comment" value="" id="FormComment">
			<button onclick="clickcomment()">submit</button>
		</div>
		<script type="text/javascript">
		function getquerystring(name){
			var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
			var r = window.location.search.substr(1).match(reg);
			if(r!=null)return  unescape(r[2]); return null;
		}
		function clickcomment(){
			var name = document.getElementById("FormName");
			var comment = document.getElementById("FormComment");
			var postname = getquerystring("name");
			//alert(postname);
			var pageAddr = "upcomment?name="+name.value+"&comment="+comment.value+"&postname="+postname;
			window.location.href = pageAddr;
		}
		function initpage(){
			convert2md();
		}
		function convert2md(){
			var list = document.getElementsByName("markdownContent");
			for(var i=0; i < list.length; i++){
				compile(list[i]);
			}
		}
		function compile(elem){
			var converter = new showdown.Converter();
			var html = converter.makeHtml(elem.textContent);
			elem.innerHTML = html;
		}
		</script>
	</body>
	<footer>
		<p class="powered-text" align="center">Powered by:<a href="https://github.com/lienze/GoBlog">GoBlog</a>&nbsp;version:{{ .BlogVersion }}
		<br>
		Contact information: <a href="mailto:lienze2010@126.com">lienze2010@126.com</a>.</p>
	</footer>
</html>

